

# שינוי סף מינימום נתונים לסיכומים

## מה ישתנה

### 1. Edge Function -- העלאת סף ל-"insufficient"

כרגע הלוגיקה היא:
- 0 ימים = `insufficient` (לא נוצר סיכום)
- פחות מ-3 (שבועי) / 10 (חודשי) = `partial` (נוצר סיכום)

**שינוי**: סף ה-`insufficient` יעלה כך שסיכום לא ייווצר בכלל אם אין מספיק נתונים:
- שבועי: פחות מ-3 ימים = `insufficient` (לא ייווצר)
- חודשי: פחות מ-15 ימים = `insufficient` (לא ייווצר)

הקוד ישתנה מ:
```text
daysWithData === 0 ? 'insufficient'
  : daysWithData < (weekly ? 3 : 10) ? 'partial'
  : 'good'
```
ל:
```text
daysWithData < (weekly ? 3 : 15) ? 'insufficient'
  : 'good'
```

כלומר `partial` יימחק לגמרי -- או שיש מספיק נתונים (`good`) או שאין (`insufficient`).

### 2. Edge Function -- החזרת מספר ימים בתשובה

כשהתוצאה היא `insufficient_data`, נחזיר גם את `days_with_data` ו-`min_required` כדי שה-UI יוכל להציג הודעה מדויקת.

### 3. UI -- הודעת "אין מספיק נתונים"

בדף `PeriodicSummary.tsx`, במצב שאין סיכום, ההודעה תשתנה:
- **שבועי**: "אין מספיק נתונים לסיכום שבועי. נדרשים לפחות 3 ימי נתונים בשבוע"
- **חודשי**: "אין מספיק נתונים לסיכום חודשי. נדרשים לפחות 15 ימי נתונים בחודש"

ההודעה תישאר גנרית (לא תלויה בתשובת ה-API) כי ההורה פשוט רואה "אין סיכום" -- לא משנה אם זה בגלל חוסר נתונים או שעדיין לא הגיע יום חמישי.

## פרטים טכניים

### קבצים שישתנו

| קובץ | שינוי |
|-------|-------|
| `supabase/functions/generate-periodic-summary/index.ts` | שינוי סף insufficient ל-3/15, הסרת partial |
| `src/pages/PeriodicSummary.tsx` | הוספת הודעה על מינימום ימים נדרשים |

### סדר ביצוע

1. עדכון Edge Function -- שינוי סף + deploy
2. עדכון UI -- הודעה מעודכנת

