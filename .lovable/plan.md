

# שיפור טאב Training - הגבלת רשומות וסינון התראות מערכת

## סיכום השינויים

שני שינויים עיקריים:

1. **הגבלה ל-100 רשומות אחרונות** - במקום לטעון את כל הרשומות מה-DB, נטען רק 100 אחרונות. הסטטיסטיקות (גרפים) ימשיכו לעבוד על כל הנתונים.

2. **סינון התראות מערכת מהטבלה** - רשומות כמו "המכשיר לא מגיב לבדיקות" הן לא רשומות אימון אמיתיות. הן יסוננו מהטבלה, ובמקומן יופיע כרטיס נפרד שמציג בעיות מכשירים פעילות.

---

## שינויים טכניים

### 1. `src/pages/Admin.tsx` - fetchTrainingStats

- **שתי שאילתות נפרדות**:
  - שאילתה ראשונה: כל הרשומות (לצורך סטטיסטיקות/גרפים) - נשאר כמו שהוא
  - שאילתה שנייה: 100 רשומות אחרונות בלבד, ממוינות לפי `created_at DESC`, עם סינון של רשומות מערכת (`raw_text` שונה מ"המכשיר לא מגיב לבדיקות") - לצורך הצגה בטבלה

- **סינון סטטיסטי**: גם הסטטיסטיקות יסננו רשומות מערכת (בלי gender, בלי age, טקסט קבוע) כדי שהגרפים ישקפו רק אימון אמיתי

- **נתון חדש**: `systemAlertCount` - כמה רשומות מערכת קיימות (להצגה בכרטיס נפרד)

### 2. `src/pages/admin/AdminTraining.tsx`

- **הסרת כפתור "הצג הכל"** - כי מגבילים ל-100 מה-DB
- **עדכון תיאור**: "100 רשומות אחרונות" במקום ספירה כללית
- **כרטיס התראות מערכת חדש**: מוצג מעל הטבלה, מציג כמה התראות מערכת (חוסר תגובה מכשיר) נמצאו בדאטה, עם אייקון אזהרה. זה מפנה את תשומת הלב לבעיות מכשירים בלי לערבב עם נתוני אימון AI

### 3. ניקוי רשומות מערכת קיימות (המלצה)

כרגע יש לפחות 10 רשומות "המכשיר לא מגיב לבדיקות" ב-training_dataset. מומלץ למחוק אותן כי הן לא תורמות לאימון. ניתן לעשות זאת עם:
```text
DELETE FROM training_dataset WHERE raw_text = 'המכשיר לא מגיב לבדיקות';
```
אציע לך לאשר זאת כחלק מהמימוש.

